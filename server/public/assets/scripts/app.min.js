/*! calculator_weekend_challenge_3 2016-03-14 */
function initialize(){setListeners()}function setListeners(){$(".calc-container").on("click",".btn-num",addToBuffer),$(".calc-container").on("click",".btn-operator",setOperator),$(".calc-container").on("click",".btn-equal",checkExpression),$(".calc-container").on("click",".btn-clear",clearAll),$(".calc-container").on("click",".btn-decimal",addDecimal),$(window).keydown(getKeys)}function getKeys(a){var b=parseInt(a.keyCode);b>47&&58>b&&addKeyToBuffer(b-48),67==b&&clearAll(),190==b&&addDecimal(),187==b?0==boolShift?checkExpression():setOperatorKey("+"):boolShift=!1,191==b&&setOperatorKey("/"),88==b&&setOperatorKey("x"),189==b&&setOperatorKey("-"),16==b&&(boolShift=!0)}function clearAll(){buffer="",operator="",valA="",valB="",displayBuffer()}function checkExpression(){buffer.length>0&&(valB=buffer),valA.length>0&&valB.length>0&&operator.length>0?doMath():(console.log("we can't do math with this stuff."),clearAll())}function doMath(){switch(operator){case"+":mathUrl="/add";break;case"-":mathUrl="/subtract";break;case"x":mathUrl="/multiply";break;case"/":mathUrl="/divide"}var a={valueA:valA,valueB:valB};$.ajax({type:"POST",url:mathUrl,data:a,success:function(a){showResult(a)}})}function showResult(a){clearAll(),buffer=a.toString(),displayBuffer()}function setOperatorKey(a){operator=a,buffer.length>0&&(valA=buffer,buffer=""),displayBuffer()}function setOperator(){var a=$(this).data("key");operator=a,buffer.length>0&&(valA=buffer,buffer=""),displayBuffer()}function addDecimal(){-1==buffer.indexOf(".")&&(buffer+=".",1==buffer.length&&(buffer="0"+buffer)),displayBuffer()}function addKeyToBuffer(a){buffer+=a,displayBuffer()}function addToBuffer(a){var b=$(this).data("key");buffer+=b,displayBuffer()}function displayBuffer(){0==buffer.length?$(".display").text(0):$(".display").text(buffer)}var buffer="",operator="",valA="",valB="",boolShift=!1;$(document).ready(function(){$("#calculator").on("submit",function(a){a.preventDefault()}),initialize()});